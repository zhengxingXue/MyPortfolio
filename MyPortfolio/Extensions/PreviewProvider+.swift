//
//  PreviewProvider+.swift
//  PreviewProvider+
//
//  Created by Jim's MacBook Pro on 9/2/21.
//

import Foundation
import SwiftUI

extension PreviewProvider {
    static var dev: DeveloperPreview {
        return DeveloperPreview.instance
    }
}

class DeveloperPreview {
    static let instance = DeveloperPreview()
    
    private init() {}
    
    var marketVM: InvestTabViewModel {
        let vm = InvestTabViewModel()
        vm.add(coin: coin)
        return vm
    }
    
//    lazy var coinDetailVM = CoinDetailViewModel(coin: coin)
    
    let browseVM = BrowseTabViewModel()
    
    let coin = CoinModel(
        id: "bitcoin",
        symbol: "btc",
        name: "Bitcoin",
        image: "https://assets.coingecko.com/coins/images/1/large/bitcoin.png?1547033579",
        currentPrice: 61408,
        marketCap: 1141731099010,
        marketCapRank: 1,
        fullyDilutedValuation: 1285385611303,
        totalVolume: 67190952980,
        high24H: 61712,
        low24H: 56220,
        priceChange24H: 3952.64,
        priceChangePercentage24H: 6.87944,
        marketCapChange24H: 72110681879,
        marketCapChangePercentage24H: 6.74171,
        circulatingSupply: 18653043,
        totalSupply: 21000000,
        maxSupply: 21000000,
        ath: 61712,
        athChangePercentage: -0.97589,
        athDate: "2021-03-13T20:49:26.606Z",
        atl: 67.81,
        atlChangePercentage: 90020.24075,
        atlDate: "2013-07-06T00:00:00.000Z",
        lastUpdated: "2021-03-13T23:18:10.268Z",
        priceChangePercentage24HInCurrency: 3952.64
    )
    
    let coinMarketChart = CoinMarketChartModel(
        prices: [
            [
                1630803564928,
                50172.57182127705
            ],
            [
                1630803844444,
                50164.795174218474
            ],
            [
                1630804232167,
                50129.15232393133
            ],
            [
                1630804454025,
                50083.12466202621
            ],
            [
                1630804793332,
                50067.703502655255
            ],
            [
                1630805090601,
                50018.05750270298
            ],
            [
                1630805377742,
                50013.74846451886
            ],
            [
                1630805701444,
                49950.39415683424
            ],
            [
                1630805993575,
                49926.79293036773
            ],
            [
                1630806276947,
                49908.94999439188
            ],
            [
                1630806589899,
                49963.68189129598
            ],
            [
                1630806908597,
                50021.024625246006
            ],
            [
                1630807193239,
                50094.77691307097
            ],
            [
                1630807500963,
                50089.75727882226
            ],
            [
                1630807800059,
                50102.49222537414
            ],
            [
                1630808075570,
                50125.159332018935
            ],
            [
                1630808395651,
                50191.75955659167
            ],
            [
                1630808682767,
                50145.28882605546
            ],
            [
                1630808985188,
                50144.29935110557
            ],
            [
                1630809262963,
                50160.89518494441
            ],
            [
                1630809594262,
                50186.97171956294
            ],
            [
                1630809897743,
                50179.481667300606
            ],
            [
                1630810210902,
                50173.537450819385
            ],
            [
                1630810502236,
                50163.10857686654
            ],
            [
                1630810795978,
                50141.80398717948
            ],
            [
                1630811087916,
                50091.18876218167
            ],
            [
                1630811401835,
                50054.126340382994
            ],
            [
                1630811684070,
                49992.2968559447
            ],
            [
                1630811997373,
                49853.74142509541
            ],
            [
                1630812285305,
                49824.041438372114
            ],
            [
                1630812578821,
                49695.64081940071
            ],
            [
                1630812893912,
                49727.610282015885
            ],
            [
                1630813156170,
                49751.12789711199
            ],
            [
                1630813490875,
                49751.46058783491
            ],
            [
                1630813792794,
                49713.06268690334
            ],
            [
                1630814069286,
                49690.689266529596
            ],
            [
                1630814394372,
                49614.64092594741
            ],
            [
                1630814663112,
                49621.87975722487
            ],
            [
                1630814975735,
                49703.26705638963
            ],
            [
                1630815300809,
                49799.399504968125
            ],
            [
                1630815588724,
                49805.873446676924
            ],
            [
                1630815893470,
                49781.71409624593
            ],
            [
                1630816236693,
                49780.006534522596
            ],
            [
                1630816512063,
                49809.884768095784
            ],
            [
                1630816755363,
                49820.6942891131
            ],
            [
                1630817074732,
                49817.58546674144
            ],
            [
                1630817439610,
                49792.418083366596
            ],
            [
                1630817692794,
                49820.7209509433
            ],
            [
                1630817990455,
                49822.64943160926
            ],
            [
                1630818295553,
                49835.83752613823
            ],
            [
                1630818625149,
                49816.558533008254
            ],
            [
                1630818874113,
                49793.941293187956
            ],
            [
                1630819188874,
                49770.35026509646
            ],
            [
                1630819474992,
                49774.7395008931
            ],
            [
                1630819796659,
                49749.895871482564
            ],
            [
                1630820091695,
                49737.559872933976
            ],
            [
                1630820378396,
                49621.56090438875
            ],
            [
                1630820698894,
                49633.5024991383
            ],
            [
                1630820995330,
                49651.727674169
            ],
            [
                1630821285479,
                49679.02867007692
            ],
            [
                1630821598266,
                49687.87474689503
            ],
            [
                1630821837038,
                49717.37719093208
            ],
            [
                1630822160254,
                49714.55194577739
            ],
            [
                1630822500028,
                49652.7721290214
            ],
            [
                1630822779776,
                49618.62507752242
            ],
            [
                1630823083147,
                49500.724962599
            ],
            [
                1630823376969,
                49578.15732984321
            ],
            [
                1630823708735,
                49638.140158807124
            ],
            [
                1630824007630,
                49756.5527733413
            ],
            [
                1630824280625,
                49785.1126395754
            ],
            [
                1630824595542,
                49849.06883910534
            ],
            [
                1630824898548,
                49850.877588945936
            ],
            [
                1630825196827,
                49850.739442119855
            ],
            [
                1630825478306,
                49852.77840609117
            ],
            [
                1630825774941,
                49880.749256836
            ],
            [
                1630826112902,
                50012.96169604446
            ],
            [
                1630826446828,
                50012.755266707296
            ],
            [
                1630826690831,
                50024.830191488254
            ],
            [
                1630827051960,
                50000.95732304536
            ],
            [
                1630827260096,
                49994.5611563191
            ],
            [
                1630827638315,
                49916.982843001875
            ],
            [
                1630827877598,
                49921.07552689971
            ],
            [
                1630828182314,
                49898.504111783404
            ],
            [
                1630828482763,
                49865.94757035705
            ],
            [
                1630828794331,
                49843.792988371846
            ],
            [
                1630829082372,
                49836.820871960816
            ],
            [
                1630829395876,
                49867.342843493
            ],
            [
                1630829657019,
                49904.7219379343
            ],
            [
                1630830040009,
                49979.11610364515
            ],
            [
                1630830300852,
                49992.00161823032
            ],
            [
                1630830593383,
                49950.67898868762
            ],
            [
                1630830888784,
                49946.64554937256
            ],
            [
                1630831184523,
                49971.9582282307
            ],
            [
                1630831489658,
                50001.3945205191
            ],
            [
                1630831810796,
                50065.02607061712
            ],
            [
                1630832061034,
                50116.00913473956
            ],
            [
                1630832387796,
                50138.7326445384
            ],
            [
                1630832689346,
                50188.04628884191
            ],
            [
                1630832973310,
                50174.890475347616
            ],
            [
                1630833272487,
                50125.739989755544
            ],
            [
                1630833573489,
                50075.16676300263
            ],
            [
                1630833897140,
                50083.87971014459
            ],
            [
                1630834247831,
                50077.03788846021
            ],
            [
                1630834485289,
                50112.811601776746
            ],
            [
                1630834835228,
                50200.1683505171
            ],
            [
                1630835063306,
                50185.97319099836
            ],
            [
                1630835454909,
                50152.391272282446
            ],
            [
                1630835707530,
                50155.06514777275
            ],
            [
                1630836000517,
                50147.6869612067
            ],
            [
                1630836256674,
                50157.22289091375
            ],
            [
                1630836583276,
                50193.65107104804
            ],
            [
                1630836853126,
                50201.66032202429
            ],
            [
                1630837163620,
                50227.000651544324
            ],
            [
                1630837502120,
                50264.12542917001
            ],
            [
                1630837803652,
                50228.01773055144
            ],
            [
                1630838094916,
                50150.05423721407
            ],
            [
                1630838374465,
                50100.13306364977
            ],
            [
                1630838687728,
                50037.28128892528
            ],
            [
                1630839046424,
                50018.30054530273
            ],
            [
                1630839288348,
                50021.12747191014
            ],
            [
                1630839612649,
                50005.63303382492
            ],
            [
                1630839866620,
                49976.15417397535
            ],
            [
                1630840214705,
                49952.38992231516
            ],
            [
                1630840489532,
                49986.39912227384
            ],
            [
                1630840814242,
                50235.31923906079
            ],
            [
                1630841090453,
                50310.35794295297
            ],
            [
                1630841367014,
                49989.0596642375
            ],
            [
                1630841714198,
                49989.44421928843
            ],
            [
                1630842033429,
                50116.85225955372
            ],
            [
                1630842258653,
                50139.083675075846
            ],
            [
                1630842581311,
                50124.05724949811
            ],
            [
                1630842856199,
                50173.411775289496
            ],
            [
                1630843230610,
                50168.37745512173
            ],
            [
                1630843482524,
                50195.734707885385
            ],
            [
                1630843775745,
                50180.880099877584
            ],
            [
                1630844079804,
                50186.803846021525
            ],
            [
                1630844417862,
                50194.32727242915
            ],
            [
                1630844626326,
                50208.38267799859
            ],
            [
                1630844977363,
                50184.314206218
            ],
            [
                1630845301606,
                50192.12160201646
            ],
            [
                1630845595177,
                50157.40818373406
            ],
            [
                1630845891736,
                50133.58060554914
            ],
            [
                1630846190541,
                50079.55291758498
            ],
            [
                1630846489745,
                49996.29696431389
            ],
            [
                1630846747937,
                50005.57742995691
            ],
            [
                1630847100476,
                50085.69473598278
            ],
            [
                1630847360988,
                50096.38636361313
            ],
            [
                1630847621313,
                50087.597878994144
            ],
            [
                1630847976913,
                50082.69546841869
            ],
            [
                1630848291009,
                50069.603942350506
            ],
            [
                1630848589054,
                50080.75772814565
            ],
            [
                1630848885458,
                50097.16408447831
            ],
            [
                1630849193395,
                50131.18573488001
            ],
            [
                1630849486555,
                50205.17829646851
            ],
            [
                1630849790647,
                50240.41496717629
            ],
            [
                1630850090801,
                50239.51339012946
            ],
            [
                1630850410370,
                50228.784285930946
            ],
            [
                1630850701604,
                50198.200713107835
            ],
            [
                1630850979950,
                50190.28891177422
            ],
            [
                1630851299870,
                50258.764084965434
            ],
            [
                1630851558159,
                50328.49378613581
            ],
            [
                1630851887704,
                50461.11164054922
            ],
            [
                1630852204042,
                50429.93489043949
            ],
            [
                1630852483083,
                50459.17954311596
            ],
            [
                1630852813703,
                50409.08163104856
            ],
            [
                1630853099244,
                50380.21208763324
            ],
            [
                1630853376990,
                50355.44286250884
            ],
            [
                1630853674257,
                50306.922288446425
            ],
            [
                1630853996887,
                50229.86922786075
            ],
            [
                1630854272015,
                50224.64707116165
            ],
            [
                1630854586294,
                50226.0971829972
            ],
            [
                1630854841383,
                50243.52782816053
            ],
            [
                1630855176470,
                50264.330047673706
            ],
            [
                1630855380000,
                50241.20774311174
            ]
        ],
        marketCaps: [],
        totalVolumes: [])
    
    lazy var coinMarketChartPrices: [(Date, Double)] = (coinMarketChart.prices ?? []).compactMap({ dataPoint in
        guard dataPoint.count > 1 else { return nil }
        return (date: Date(milliseconds: Int64(dataPoint[0])), price: dataPoint[1])
    })
    
    let news = NewsModel(
        source: Source(id: nil, name: "Honolulu Star-Advertiser"),
        title: "Safe Access Oahu program to require proof of vaccination or recent COVID test to enter establishments - Honolulu Star-Advertiser",
        url: "https://soyacincau.com/2021/08/31/tesla-model-x-lengthy-software-update-stopped-vlogger-david-dobrik-driving-home/",
        urlToImage: "https://deadline.com/wp-content/uploads/2021/08/Mike-Richards.jpg?w=1000",
        publishedAt: "2021-08-30T21:50:47Z"
    )
    
    func getAccountVM() -> AccountTabViewModel {
        let accountVM = AccountTabViewModel()
        _ = accountVM.currentAccount
        accountVM.addOrder(coin: "bitcoin", amount: 0.01, price: 50000)
        return accountVM
    }
    
    var portfolioEntity: PortfolioEntity {
        let portolioEntity = PortfolioEntity()
        portolioEntity.name = "bitcoin"
        portolioEntity.amount = 1
        portolioEntity.initValue = 50000
        portolioEntity.currentPrice = 50000
        return portolioEntity
    }
    
}
